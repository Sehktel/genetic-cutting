<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Linear cut genetic optimizer</title>
	<script src="lib/genetic.js"></script>
    <script src="src/cutting.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>

<h1>Linear cut genetic optimizer</h1>

<table>
    <thead>
    <tr>
        <th>Изделия</th>
        <th>Заготовки</th>
        <th>Параметры</th>
    </tr>
    </thead>
    <tbody style="font-family: monospace;">
    <tr>
        <td><textarea id="products" style="width: 100px; height: 300px;">491
1546
491
1546
491
1546
491
1546
491
1546
506
516
838
1666
838
1666
838
1666
838
1666
838
1666
838
1666
863
1666
863
1666
863
1666
531
1666
531
1666
863
1666
863
1666
863
1666
838
1666
838
1666
838
1666
838
1666
838
1666
838
1666
531
1666
531
1666
586
976
586
976</textarea></td>
        <td><textarea id="workpieces" style="width: 100px; height: 300px;">3307
3279
1438
4105
5271</textarea></td>
        <td><textarea id="params" style="width: 200px; height: 300px;">knifewidth 4
sticklength 6000
wrongsnipmin 0
wrongsnipmax 0</textarea></td>
    </tr>
    </tbody>
</table>



<button id="solve">Solve</button>

<table id="results">
	<thead>
		<tr>
			<th>Generation</th>
			<th>Fitness</th>
			<th>Solution</th>
		</tr>
	</thead>
	<tbody style="font-family: monospace;">
	</tbody>
</table>

<script>

var cutting = new Genetic.Cutting("1D");


$(document).ready(function () {
	$("#solve").click(function () {
		
		$("#results tbody").html("");
		
		var config = {
			"iterations": 9000
			, "size": 300
			, "crossover": 0.3
			, "mutation": 0.3
			, "skip": 60
            , "webWorkers": false
		};

        var userData = {
            products: $("#products").val().split("\n").map(function(v){return parseInt(v)}),
            workpieces: $("#workpieces").val().split("\n").map(function(v){return parseInt(v)})
        };

        cutting.genetic.evolve(config, userData);
	});
});


</script>
	
	
</body>
</html>